(this["webpackJsonpdiscussion-page"]=this["webpackJsonpdiscussion-page"]||[]).push([[0],{136:function(e,t,a){e.exports=a(286)},141:function(e,t,a){},142:function(e,t,a){},246:function(e,t,a){},286:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(21),c=a.n(o),s=(a(141),a(23)),m=a(24),l=a(28),i=a(25),u=a(29),p=(a(142),a(15)),d=a(293),E=a(291),h=a(292),f=a(127),v=a(295),b=function(e){var t=e.input,a=e.type,n=e.placeholder,o=e.as;return r.a.createElement(h.a.Control,{type:a,placeholder:n,value:t.value,as:o,onChange:t.onChange})},g=function(e){return r.a.createElement(h.a,{onSubmit:e.handleSubmit},r.a.createElement(h.a.Row,null,r.a.createElement(h.a.Group,{as:f.a,controlId:"formGridEmail"},r.a.createElement(d.a,{name:"authorName",component:b,type:"text",placeholder:"Author name"}))),r.a.createElement(h.a.Row,null,r.a.createElement(h.a.Group,{as:f.a,controlId:"formGridEmail"},r.a.createElement(d.a,{name:"text",component:b,as:"textarea",rows:"3",placeholder:"Comment text"}))),r.a.createElement(h.a.Row,null,r.a.createElement("div",{className:"custom-control custom-switch"},r.a.createElement(d.a,{name:"state",component:"input",type:"checkbox",className:"custom-control-input",id:"customSwitchesChecked",defaultChecked:!1}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitchesChecked"},"Negative / Positive"))),r.a.createElement(h.a.Row,null,r.a.createElement(v.a,{variant:"primary",type:"submit",style:{marginRight:"40px"}},"Submit+")))},_=Object(E.a)({form:"crud"})(g),N=(Object(E.a)({form:"comments"})(g),a(9)),w=a.n(N),C=(a(246),function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(i.a)(t).call(this,e))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.commentsPage,t=e.isOpen,a=e.content;return t?(console.log(this.props),r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"Edit comment"),r.a.createElement("button",{type:"button",className:"close"},r.a.createElement("span",null,"\xd7"))),a)))):null}}]),t}(r.a.Component)),O=a(133),x={comments:[],isOpen:!1,content:null},y=function(e){return{type:"SET_COMMENTS",comments:e}},k=Object(p.b)((function(e){return{commentsPage:e.commentsPage}}),(function(e){return{}}))(C),j=a(61),L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).newRef=r.a.createRef(),a.updateNewInputText=function(e){a.state.text=e},a.updateData=function(e,t){a.props.updateComment(e,t).then((function(e){console.log(e),void 0===e.errors&&a.props.getCommentsList().then((function(e){a.props.setComments(e.data)}))}))},console.log(e),console.log(e.id),a.state={id:a.props.id,text:a.props.text},a.changeText=a.changeText.bind(Object(j.a)(a)),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"close",value:function(){this.props.closeModal()}},{key:"changeText",value:function(){this.setState({text:this.newRef.current.value})}},{key:"save",value:function(){console.log("SAVE"),console.log(this.props.id);var e=this.state,t=e.id,a=e.text;this.props.editComment(t,a);var n=this.newRef.current.value;console.log("RREEFF",n),this.updateData(this.props.id,{text:n}),this.close()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-body"},console.log(this.props),r.a.createElement("textarea",{ref:this.newRef,onChange:this.changeText,value:this.state.text,cols:"40"})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.save()}},"Save changes"),r.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:function(){return e.close()}},"Close")))}}]),t}(r.a.Component),T=a(18),D=a.n(T),S=a(41),R=a(42),I=a.n(R),M=function(){var e=Object(S.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.post("https://guarded-mountain-57996.herokuapp.com/comments",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(S.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("https://guarded-mountain-57996.herokuapp.com/comments/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(S.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.delete("https://guarded-mountain-57996.herokuapp.com/comments/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(S.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("https://guarded-mountain-57996.herokuapp.com/comments/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(S.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.patch("https://guarded-mountain-57996.herokuapp.com/comments/".concat(t),a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=Object(p.b)((function(e){return{comments:e.commentsPage.comments}}),(function(e){return{closeModal:function(){e({type:"CLOSE_MODAL"})},editComment:function(t,a){e(function(e,t){return{type:"EDIT_COMMENTS",id:e,text:t}}(t,a))},updateComment:B,setComments:function(t){e(y(t))},getCommentsList:P}}))(L),G=function(e){var t=r.a.createRef(),a=r.a.createRef(),n=r.a.createRef();return r.a.createElement(h.a,{onSubmit:function(r){var o=r.currentTarget;console.log(r),console.log(o);var c={authorName:t.current.value,text:a.current.value,state:n.current.checked,parentId:e.parentId};console.log(c),e.addComment(c).then((function(t){console.log(t.data),void 0===t.errors&&e.getCommentsList().then((function(t){e.setComments(t.data)}))})),r.preventDefault(),r.stopPropagation()}},r.a.createElement(h.a.Group,{controlId:"exampleForm.ControlInput1"},r.a.createElement(h.a.Row,null,r.a.createElement(f.a,null,r.a.createElement(h.a.Control,{as:"input",placeholder:"Author name",ref:t})))),r.a.createElement(h.a.Group,{controlId:"exampleForm.ControlTextarea1"},r.a.createElement(h.a.Control,{as:"textarea",rows:"3",placeholder:"text",ref:a})),r.a.createElement(h.a.Check,{type:"switch",id:"custom-switch",label:"Negative / Positive",ref:n}),r.a.createElement(v.a,{type:"submit"},"Reply"))},H=Object(p.b)((function(e){return{comments:e.commentsPage.comments}}),(function(e){return{setComments:function(t){e(y(t))},getCommentsList:P,addComment:M}}))(G),J=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).delData=function(e){a.props.deleteComment(e).then((function(t){t.data.deletedCount>0&&a.props.setComments(a.props.comments.filter((function(t){return t._id!=e})))}))},a.onSubmit=function(e){void 0===e.state&&(e.state=!1),console.log(e),a.props.addComment(e).then((function(e){void 0===e.errors&&a.props.getCommentsList().then((function(e){a.props.setComments(e.data)}))}))},a.openForm=function(e){a.state.isClose&&a.setState({isForm:e,isClose:!1}),!1===a.state.isClose&&a.setState({isForm:null,isClose:!0})},a.edit=function(e,t){a.props.openModal(r.a.createElement(W,{id:e,text:t}))},a.state={isForm:null,isClose:!0},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;0===this.props.comments.length&&this.props.getCommentsList().then((function(t){e.props.setComments(t.data)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",null,"Create new record"),r.a.createElement(k,null),r.a.createElement(_,{onSubmit:this.onSubmit})),r.a.createElement("div",{className:w.a.wrapBlock},this.props.comments.map((function(t){return null===t.parentId?r.a.createElement("div",{className:w.a.container,key:t._id},r.a.createElement("div",{className:"".concat(w.a.wrapper," ").concat(1==t.state?w.a.statePositive:w.a.stateNegative)},r.a.createElement("div",{className:w.a.header},r.a.createElement("div",null,r.a.createElement("span",{className:w.a.itemName},t.authorName)),r.a.createElement("div",null,r.a.createElement("span",{className:w.a.itemTime},"posted: ",t.creationTime))),r.a.createElement("div",{className:w.a.body},r.a.createElement("div",null,r.a.createElement("span",null,t.text))),r.a.createElement("div",{className:w.a.btnWrap},r.a.createElement("div",null,r.a.createElement("button",{className:w.a.btnEdit,onClick:function(){e.edit(t._id,t.text)}},"EDIT")),r.a.createElement("div",null,r.a.createElement("button",{className:w.a.btnDelete,onClick:function(){return e.delData(t._id)}},"DELETE")),r.a.createElement("div",null,r.a.createElement("button",{className:w.a.btnEdit,onClick:function(){return e.openForm(t._id)}},"add comment")))),e.state.isForm===t._id?r.a.createElement("div",null,r.a.createElement(H,{parentId:t._id})):null,r.a.createElement("div",{className:w.a.clear}),r.a.createElement("div",{className:w.a.containerNew},e.props.comments.map((function(a){return a.parentId===t._id?r.a.createElement("div",{key:a._id},r.a.createElement("div",{className:"".concat(w.a.wrapperNew," ").concat(1==a.state?w.a.statePositive:w.a.stateNegative)},r.a.createElement("div",{className:w.a.header},r.a.createElement("div",null,r.a.createElement("span",{className:w.a.itemName},a.authorName)),r.a.createElement("div",null,r.a.createElement("span",{className:w.a.itemTime},"posted: ",a.creationTime))),r.a.createElement("div",{className:w.a.body},r.a.createElement("div",null,r.a.createElement("span",null,a.text))),r.a.createElement("div",{className:w.a.btnWrap},r.a.createElement("div",null,r.a.createElement("button",{className:w.a.btnEdit,onClick:function(){e.edit(a._id,a.text)}},"EDIT")),r.a.createElement("div",null,r.a.createElement("button",{className:w.a.btnDelete,onClick:function(){return e.delData(a._id)}},"DELETE"))))):null})))):null}))))}}]),t}(r.a.Component),U=Object(p.b)((function(e){return{comments:e.commentsPage.comments}}),(function(e){return{setComments:function(t){e(y(t))},getCommentsList:P,deleteComment:F,getCommentById:A,addComment:M,openModal:function(t){e(function(e){return{type:"OPEN_MODAL",content:e}}(t))}}}))(J),Z=a(290),K=a(43),Q=a.n(K),V=function(e){var t=0,a=0;return e.comments.forEach((function(e){!0===e.state&&null===e.parentId?t++:!1===e.state&&null===e.parentId&&a++})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Q.a.container},r.a.createElement(Z.a,{bg:"dark",variant:"dark"},r.a.createElement(Z.a.Brand,{href:"#home"},r.a.createElement("div",{className:Q.a.wrap},r.a.createElement("div",null,r.a.createElement("img",{alt:"some people",src:"https://webstockreview.net/images/collaboration-clipart-discussion-3.png",width:"80",height:"55",className:"d-inline-block align-top"})," "),r.a.createElement("div",{className:Q.a.itemRight},r.a.createElement("span",null,"Discussion page")),r.a.createElement("div",{className:Q.a.itemWrap},r.a.createElement("div",null,r.a.createElement("span",null,"Comment's statistic:")),r.a.createElement("div",{className:Q.a.itemStat},r.a.createElement("span",null,"Negative comments: ",a),r.a.createElement("span",null,"Positive comments: ",t))))))))},Y=a(35),z=a(66),X=a.n(z),$=function(){return r.a.createElement(Y.e,{className:"font-small pt-4 mt-4"},r.a.createElement("div",{className:X.a.wrap},r.a.createElement(Y.d,{fluid:!0,className:"text-center text-md-left"},r.a.createElement(Y.i,null,r.a.createElement(Y.c,{md:"6"},r.a.createElement("h5",{className:"title"},"Short information about this page"),r.a.createElement("p",null,"A small discussion page. The client part was developed with React Js and Redux to manage the state of the application. The server part was developed with Node Js(Express Js). MongoDB is used as the database management system.")),r.a.createElement(Y.c,{md:"6"},r.a.createElement("h5",{className:X.a.title},"Links"),r.a.createElement("ul",{className:X.a.wrapList},r.a.createElement("li",{className:"list-unstyled"},r.a.createElement("a",{href:"https://www.facebook.com/andrey.komar.54"},"Facebook")),r.a.createElement("li",{className:"list-unstyled"},r.a.createElement("a",{href:"https://www.instagram.com/_andrey.komar/?hl=ru"},"Instagram")),r.a.createElement("li",{className:"list-unstyled"},r.a.createElement("a",{href:"https://t.me/andrewkomar"},"Telegram")),r.a.createElement("li",{className:"list-unstyled"},r.a.createElement("a",{href:"#!"},"E-mail: tornhill1997@gmail.com"))))))),r.a.createElement("div",{className:"footer-copyright text-center py-3"},r.a.createElement(Y.d,{fluid:!0},"\xa9 ",(new Date).getFullYear()," Developed by: ",r.a.createElement("a",{href:"https://www.facebook.com/andrey.komar.54"}," Andrew Komar "))))},q=Object(p.b)((function(e){return{comments:e.commentsPage.comments}}),(function(e){return{}}))(V),ee=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null),r.a.createElement("div",{className:"container"},r.a.createElement(U,null)),r.a.createElement($,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=a(12),ae=a(294),ne=Object(te.b)({form:ae.a,commentsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COMMENTS":return Object(O.a)({},e,{comments:t.comments});case"OPEN_MODAL":return Object.assign({},e,{isOpen:!0,content:t.content});case"CLOSE_MODAL":return Object.assign({},e,{isOpen:!1});case"EDIT_COMMENTS":var a=e.comments.findIndex((function(e){return console.log("INDEX",e._id,t),e._id===t.id}));return console.log("index",a),e.comments[a].text=t.text,Object.assign({},e,{comments:e.comments});default:return e}}});var re=a(34);a(283),a(284),a(285);c.a.render(r.a.createElement(re.a,null,r.a.createElement(p.a,{store:Object(te.c)(ne)},r.a.createElement(ee,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},43:function(e,t,a){e.exports={wrap:"Header_wrap__1sQdS",itemRight:"Header_itemRight__1mB96",container:"Header_container__3GM0Q",itemStat:"Header_itemStat__2nll0",itemWrap:"Header_itemWrap__2n41-"}},66:function(e,t,a){e.exports={wrap:"Footer_wrap__35emh",wrapList:"Footer_wrapList__2uPzn",title:"Footer_title__1-Dmn"}},9:function(e,t,a){e.exports={header:"CommentsList_header__2eRUj",wrapper:"CommentsList_wrapper__1aoJZ",wrapperNew:"CommentsList_wrapperNew__2whiE",statePositive:"CommentsList_statePositive__2fGMp",stateNegative:"CommentsList_stateNegative__2YUC6",wrapBlock:"CommentsList_wrapBlock__2Ojdx",container:"CommentsList_container__1EKVs",itemName:"CommentsList_itemName__1WEBT",itemTime:"CommentsList_itemTime__3EZ8p",body:"CommentsList_body__1EZdM",btnWrap:"CommentsList_btnWrap__vH4-p",btnEdit:"CommentsList_btnEdit__35Lp3",btnDelete:"CommentsList_btnDelete__3NwUu",containerNew:"CommentsList_containerNew__2vHPH"}}},[[136,1,2]]]);
//# sourceMappingURL=main.ab80b23a.chunk.js.map